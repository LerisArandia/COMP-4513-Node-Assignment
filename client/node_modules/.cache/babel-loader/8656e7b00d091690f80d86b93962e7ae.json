{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\leris\\\\Desktop\\\\COMP-4513-Node-Assignment\\\\client\\\\src\\\\component\\\\MovieDetailsView.js\";\nimport React from 'react';\nimport MovieDetails from './MovieDetails';\nimport HeaderApp from './HeaderApp.js';\nimport DetailTabs from './DetailTabs.js';\nimport Favorites from './Favorites.js';\nimport CastView from './CastView.js';\nimport \"../css/MovieDetails.css\";\n\nclass MovieDetailsView extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.addToFav = link => {\n      let value = false;\n      console.log(link);\n\n      for (let c of this.state.favs) {\n        if (c.poster === link.poster) {\n          value = true;\n        }\n      }\n\n      if (value === false) {\n        const data = this.state.favs;\n        data.push(link);\n        this.setState({\n          favorites: data\n        });\n      }\n    };\n\n    this.deleteFav = link => {\n      const fav = this.state.favs;\n\n      for (let c = 0; c < fav.length; c++) {\n        if (fav[c].poster === link.poster) {\n          fav.splice(c, 1);\n        }\n      }\n\n      this.setState({\n        favs: fav\n      });\n    };\n\n    this.castViewOn = cast => {\n      this.setState({\n        showCast: false\n      });\n      console.log(\"in details view castview on\");\n      console.log(cast);\n      this.setState({\n        castMember: cast,\n        showCast: true\n      });\n    };\n\n    this.castViewOff = () => {\n      if (this.state.showCast) {\n        this.setState({\n          showCast: false\n        });\n      }\n    };\n\n    this.state = {\n      id: this.props.location.state.id,\n      loaded: false,\n      showCast: false\n    };\n    this.state.favs = this.props.location.state.favsList;\n    this.state.addFavs = this.props.location.state.addToFavs;\n    this.state.movieData = [];\n    this.state.castMember = \"\";\n  }\n\n  async componentDidMount() {\n    try {\n      const url = `https://www.randyconnolly.com/funwebdev/3rd/api/movie/movies.php?id=${this.props.location.state.id}`;\n      const response = await fetch(url);\n      const jsonData = await response.json();\n      this.setState({\n        movieData: jsonData,\n        loaded: true\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  render() {\n    let component = \"\";\n\n    if (!this.state.showCast) {\n      component = /*#__PURE__*/React.createElement(MovieDetails, {\n        movieData: this.state.movieData,\n        addFav: this.addToFav,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }\n      });\n    } else {\n      component = /*#__PURE__*/React.createElement(CastView, {\n        id: this.state.castMember,\n        close: this.castViewOff,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 30\n        }\n      });\n    }\n\n    if (this.state.loaded) {\n      return /*#__PURE__*/React.createElement(\"section\", {\n        className: \"main\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(HeaderApp, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(Favorites, {\n        favs: this.state.favs,\n        delete: this.deleteFav,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"movie-details\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 25\n        }\n      }, console.log(this.state.castMember), console.log(\"^^^^^^^^^^ castMember in details view\"), component, /*#__PURE__*/React.createElement(DetailTabs, {\n        movieData: this.state.movieData,\n        toggle: this.castViewOn,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 29\n        }\n      }))));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(HeaderApp, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(Favorites, {\n        favs: this.state.favs,\n        delete: this.deleteFav,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-spinner fa-spin\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 27\n        }\n      })));\n    }\n  }\n\n}\n\nexport default MovieDetailsView;","map":{"version":3,"sources":["C:/Users/leris/Desktop/COMP-4513-Node-Assignment/client/src/component/MovieDetailsView.js"],"names":["React","MovieDetails","HeaderApp","DetailTabs","Favorites","CastView","MovieDetailsView","Component","constructor","props","addToFav","link","value","console","log","c","state","favs","poster","data","push","setState","favorites","deleteFav","fav","length","splice","castViewOn","cast","showCast","castMember","castViewOff","id","location","loaded","favsList","addFavs","addToFavs","movieData","componentDidMount","url","response","fetch","jsonData","json","error","render","component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport MovieDetails from './MovieDetails';\r\nimport HeaderApp from './HeaderApp.js';\r\nimport DetailTabs from './DetailTabs.js';\r\nimport Favorites from './Favorites.js';\r\nimport CastView from './CastView.js';\r\nimport \"../css/MovieDetails.css\";\r\n\r\nclass MovieDetailsView extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            id: this.props.location.state.id,\r\n            loaded: false,\r\n            showCast: false\r\n        };\r\n        this.state.favs = this.props.location.state.favsList;\r\n        this.state.addFavs = this.props.location.state.addToFavs;\r\n        this.state.movieData = [];\r\n        this.state.castMember = \"\";\r\n    }\r\n\r\n    async componentDidMount() {\r\n        try {\r\n            const url = `https://www.randyconnolly.com/funwebdev/3rd/api/movie/movies.php?id=${this.props.location.state.id}`;\r\n\r\n            const response = await fetch(url);\r\n            const jsonData = await response.json();\r\n\r\n            this.setState({ movieData: jsonData, loaded: true });\r\n\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n\r\n    addToFav = (link) => {\r\n        let value = false;\r\n        console.log(link);\r\n        for (let c of this.state.favs) {\r\n            if (c.poster === link.poster) {\r\n                value = true;\r\n            }\r\n        }\r\n\r\n        if (value === false) {\r\n            const data = this.state.favs;\r\n            data.push(link);\r\n            this.setState({ favorites: data });\r\n        }\r\n    }\r\n\r\n    deleteFav = (link) => {\r\n        const fav = this.state.favs;\r\n        for (let c = 0; c < fav.length; c++) {\r\n            if (fav[c].poster === link.poster) {\r\n                fav.splice(c, 1);\r\n            }\r\n        }\r\n\r\n        this.setState({ favs: fav });\r\n    }\r\n\r\n    castViewOn = (cast) => {\r\n        this.setState({ showCast: false });\r\n        console.log(\"in details view castview on\");\r\n        console.log(cast);\r\n        this.setState({ castMember: cast, showCast: true });\r\n    }\r\n\r\n    castViewOff = () => {\r\n        if (this.state.showCast) {\r\n            this.setState({ showCast: false });\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        let component = \"\";\r\n        if (!this.state.showCast) {\r\n            component = <MovieDetails movieData={this.state.movieData} addFav={this.addToFav} />;\r\n        } else { component = <CastView id={this.state.castMember} close={this.castViewOff} />; }\r\n\r\n\r\n        if (this.state.loaded) {\r\n            return (\r\n                <section className='main'>\r\n                    <div>\r\n                        <HeaderApp />\r\n                        <Favorites favs={this.state.favs} delete={this.deleteFav} />\r\n                        <div id=\"movie-details\">\r\n                            {console.log(this.state.castMember)}\r\n                            {console.log(\"^^^^^^^^^^ castMember in details view\")}\r\n                            {component}\r\n                            <DetailTabs movieData={this.state.movieData} toggle={this.castViewOn} />\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n            );\r\n        }\r\n        else {\r\n            return (\r\n                <div>\r\n                    <HeaderApp />\r\n                    <Favorites favs={this.state.favs} delete={this.deleteFav} />\r\n                    <span><i className=\"fas fa-spinner fa-spin\"></i></span>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\nexport default MovieDetailsView;\r\n"]},"metadata":{},"sourceType":"module"}