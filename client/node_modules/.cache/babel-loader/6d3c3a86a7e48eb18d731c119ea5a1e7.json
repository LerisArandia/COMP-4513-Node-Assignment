{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nathen/web3/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nathen/web3/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/nathen/web3/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/nathen/web3/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/nathen/web3/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/nathen/web3/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/nathen/web3/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import MovieDetails from'./MovieDetails';import HeaderApp from'./HeaderApp.js';import DetailTabs from'./DetailTabs.js';import Favorites from'./Favorites.js';import CastView from'./CastView.js';import\"../css/MovieDetails.css\";var MovieDetailsView=/*#__PURE__*/function(_React$Component){_inherits(MovieDetailsView,_React$Component);function MovieDetailsView(props){var _this;_classCallCheck(this,MovieDetailsView);_this=_possibleConstructorReturn(this,_getPrototypeOf(MovieDetailsView).call(this,props));_this.addToFav=function(link){var value=false;console.log(link);var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=_this.state.favs[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var c=_step.value;if(c.poster===link.poster){value=true;}}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}if(value===false){var data=_this.state.favs;data.push(link);_this.setState({favorites:data});}};_this.deleteFav=function(link){var fav=_this.state.favs;for(var c=0;c<fav.length;c++){if(fav[c].poster===link.poster){fav.splice(c,1);}}_this.setState({favs:fav});};_this.castViewOn=function(cast){_this.setState({showCast:false});console.log(\"in details view castview on\");console.log(cast);_this.setState({castMember:cast,showCast:true});};_this.castViewOff=function(){if(_this.state.showCast){_this.setState({showCast:false});}};_this.state={id:_this.props.location.state.id,loaded:false,showCast:false};_this.state.favs=_this.props.location.state.favsList;_this.state.addFavs=_this.props.location.state.addToFavs;_this.state.movieData=[];_this.state.castMember=\"\";return _this;}_createClass(MovieDetailsView,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,response,jsonData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;url=\"http://www.randyconnolly.com/funwebdev/3rd/api/movie/movies.php?id=\".concat(this.props.location.state.id);_context.next=4;return fetch(url);case 4:response=_context.sent;_context.next=7;return response.json();case 7:jsonData=_context.sent;this.setState({movieData:jsonData,loaded:true});_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,this,[[0,11]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var component=\"\";if(!this.state.showCast){component=React.createElement(MovieDetails,{movieData:this.state.movieData,addFav:this.addToFav});}else{component=React.createElement(CastView,{id:this.state.castMember,close:this.castViewOff});}if(this.state.loaded){return React.createElement(\"section\",{className:\"main\"},React.createElement(\"div\",null,React.createElement(HeaderApp,null),React.createElement(Favorites,{favs:this.state.favs,delete:this.deleteFav}),React.createElement(\"div\",{id:\"movie-details\"},console.log(this.state.castMember),console.log(\"^^^^^^^^^^ castMember in details view\"),component,React.createElement(DetailTabs,{movieData:this.state.movieData,toggle:this.castViewOn}))));}else{return React.createElement(\"div\",null,React.createElement(HeaderApp,null),React.createElement(Favorites,{favs:this.state.favs,delete:this.deleteFav}),React.createElement(\"span\",null,React.createElement(\"i\",{className:\"fas fa-spinner fa-spin\"})));}}}]);return MovieDetailsView;}(React.Component);export default MovieDetailsView;","map":{"version":3,"sources":["/Users/nathen/web3/src/component/MovieDetailsView.js"],"names":["React","MovieDetails","HeaderApp","DetailTabs","Favorites","CastView","MovieDetailsView","props","addToFav","link","value","console","log","state","favs","c","poster","data","push","setState","favorites","deleteFav","fav","length","splice","castViewOn","cast","showCast","castMember","castViewOff","id","location","loaded","favsList","addFavs","addToFavs","movieData","url","fetch","response","json","jsonData","error","component","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport MovieDetails from './MovieDetails';\nimport HeaderApp from './HeaderApp.js';\nimport DetailTabs from './DetailTabs.js';\nimport Favorites from './Favorites.js';\nimport CastView from './CastView.js';\nimport \"../css/MovieDetails.css\";\n\nclass MovieDetailsView extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            id: this.props.location.state.id,\n            loaded: false,\n            showCast: false\n        };\n        this.state.favs = this.props.location.state.favsList;\n        this.state.addFavs = this.props.location.state.addToFavs;\n        this.state.movieData = [];\n        this.state.castMember = \"\";\n    }\n\n    async componentDidMount() {\n        try {\n            const url = `http://www.randyconnolly.com/funwebdev/3rd/api/movie/movies.php?id=${this.props.location.state.id}`;\n\n            const response = await fetch(url);\n            const jsonData = await response.json();\n\n            this.setState({ movieData: jsonData, loaded: true });\n\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    addToFav = (link) => {\n        let value = false;\n        console.log(link);\n        for (let c of this.state.favs) {\n            if (c.poster === link.poster) {\n                value = true;\n            }\n        }\n\n        if (value === false) {\n            const data = this.state.favs;\n            data.push(link);\n            this.setState({ favorites: data });\n        }\n    }\n\n    deleteFav = (link) => {\n        const fav = this.state.favs;\n        for (let c = 0; c < fav.length; c++) {\n            if (fav[c].poster === link.poster) {\n                fav.splice(c, 1);\n            }\n        }\n\n        this.setState({ favs: fav });\n    }\n\n    castViewOn = (cast) => {\n        this.setState({ showCast: false });\n        console.log(\"in details view castview on\");\n        console.log(cast);\n        this.setState({ castMember: cast, showCast: true });\n    }\n\n    castViewOff = () => {\n        if (this.state.showCast) {\n            this.setState({ showCast: false });\n        }\n    }\n\n    render() {\n\n        let component = \"\";\n        if (!this.state.showCast) {\n            component = <MovieDetails movieData={this.state.movieData} addFav={this.addToFav} />;\n        } else { component = <CastView id={this.state.castMember} close={this.castViewOff} />; }\n\n\n        if (this.state.loaded) {\n            return (\n                <section className='main'>\n                    <div>\n                        <HeaderApp />\n                        <Favorites favs={this.state.favs} delete={this.deleteFav} />\n                        <div id=\"movie-details\">\n                            {console.log(this.state.castMember)}\n                            {console.log(\"^^^^^^^^^^ castMember in details view\")}\n                            {component}\n                            <DetailTabs movieData={this.state.movieData} toggle={this.castViewOn} />\n                        </div>\n                    </div>\n                </section>\n            );\n        }\n        else {\n            return (\n                <div>\n                    <HeaderApp />\n                    <Favorites favs={this.state.favs} delete={this.deleteFav} />\n                    <span><i className=\"fas fa-spinner fa-spin\"></i></span>\n                </div>\n            );\n        }\n    }\n}\nexport default MovieDetailsView;\n"]},"metadata":{},"sourceType":"module"}